{"version":3,"file":"call_back.js","mappings":"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","sources":["webpack://call_back/./src/index.ts","webpack://call_back/./src/languages/ sync ^\\.\\/.*\\.json$","webpack://call_back/webpack/bootstrap","webpack://call_back/webpack/runtime/hasOwnProperty shorthand","webpack://call_back/webpack/startup"],"sourcesContent":["import { apiUrl } from \"./constants/ApiUrl\";\r\nimport { version } from \"../package.json\";\r\nimport ILanguage from \"./interfaces/ILanguage\";\r\nimport IParams from \"./interfaces/IParams\";\r\n\r\n/**\r\n * class CallBack, init it with custom or default styles\r\n */\r\nexport class CallBack {\r\n  /**\r\n   * Language\r\n   */\r\n  language: ILanguage = Object.assign({}, require(`./languages/en.json`));\r\n\r\n  /**\r\n   * Set language\r\n   */\r\n  setLanguage = (lang: string) => {\r\n    try {\r\n      this.language = Object.assign({}, require(`./languages/${lang}.json`));\r\n    } catch (e) {\r\n      console.log(`Language ${lang} is not supported`);\r\n    }\r\n  };\r\n\r\n  btn: HTMLDivElement = document.createElement(\"div\");\r\n  popup: HTMLDivElement = document.createElement(\"div\");\r\n  closeButton: HTMLDivElement = document.createElement(\"div\");\r\n  text: HTMLParagraphElement = document.createElement(\"p\");\r\n  sendButton: HTMLButtonElement = document.createElement(\"button\");\r\n  form: HTMLFormElement = document.createElement(\"form\");\r\n  input: HTMLInputElement = document.createElement(\"input\");\r\n  show: boolean = false;\r\n\r\n  /**\r\n   * Function that will be saved to window, can be launched from anywhere.\r\n   */\r\n  init = async (params: IParams): Promise<void> => {\r\n    const html: HTMLElement | null = document.querySelector(\"html\");\r\n    const lang: string | null | undefined =\r\n      params.lang || html?.getAttribute(\"lang\");\r\n    this.setLanguage(lang || \"en\");\r\n    const elm = await this.waitForElement(\"body\");\r\n    if (elm) {\r\n      this.renderCallBack(params);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Function to wait for the HTML element\r\n   */\r\n  waitForElement = (selector: string): Promise<Element | null> => {\r\n    return new Promise((resolve) => {\r\n      if (document.querySelector(selector)) {\r\n        return resolve(document.querySelector(selector));\r\n      }\r\n\r\n      const observer = new MutationObserver((mutations) => {\r\n        if (document.querySelector(selector)) {\r\n          resolve(document.querySelector(selector));\r\n          observer.disconnect();\r\n        }\r\n      });\r\n\r\n      observer.observe(document.body, {\r\n        childList: true,\r\n        subtree: true,\r\n      });\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Main function that renders a callback button and popup with phone input\r\n   */\r\n  renderCallBack = (params: IParams): void => {\r\n    this.applyButtonStyle(params);\r\n    this.applyPopupStyle(params);\r\n    this.applyCloseButtonStyle(params);\r\n    this.applyTextStyle(params);\r\n    this.applyFormStyle();\r\n    this.applyInputStyle(params);\r\n    this.applySendButtonStyle(params);\r\n    this.addEvents(params);\r\n    this.appendAll();\r\n  };\r\n\r\n  applyButtonStyle = (params: IParams): void => {\r\n    Object.assign(\r\n      this.btn.style,\r\n      Object.assign(\r\n        {\r\n          cursor: \"pointer\",\r\n          width: \"80px\",\r\n          height: \"80px\",\r\n          background: \"url(icons/phone.svg)center/cover\",\r\n          position: \"fixed\",\r\n          bottom: \"20px\",\r\n          right: \"20px\",\r\n          boxShadow: \"none\",\r\n          transform: \"scale(1)\",\r\n          transition: \"0.2s\",\r\n        },\r\n        params.buttonStyle || {}\r\n      )\r\n    );\r\n  };\r\n  applyButtonHoverStyle = (params: IParams): void => {\r\n    Object.assign(\r\n      this.btn.style,\r\n      params.hoverButtonStyle || {\r\n        transform: \"scale(1.1)\",\r\n      }\r\n    );\r\n  };\r\n  applyPopupStyle = (params: IParams): void => {\r\n    Object.assign(\r\n      this.popup.style,\r\n      Object.assign(\r\n        {\r\n          width: \"100%\",\r\n          maxWidth: \"440px\",\r\n          height: \"240px\",\r\n          background: \"rgb(5, 168, 154)\",\r\n          position: \"fixed\",\r\n          bottom: \"60px\",\r\n          right: \"60px\",\r\n          borderRadius: \"5px\",\r\n          display: this.show ? \"block\" : \"none\",\r\n          boxSizing: \"border-box\",\r\n          padding: \"20px\",\r\n        },\r\n        params.popupStyle || {}\r\n      )\r\n    );\r\n  };\r\n\r\n  applyCloseButtonStyle = (params: IParams): void => {\r\n    Object.assign(\r\n      this.closeButton.style,\r\n      Object.assign(\r\n        {\r\n          cursor: \"pointer\",\r\n          width: \"20px\",\r\n          height: \"20px\",\r\n          background: \"url(icons/arrow_down.svg)center/cover\",\r\n          position: \"absolute\",\r\n          top: \"10px\",\r\n          right: \"10px\",\r\n          boxShadow: \"none\",\r\n          transform: \"scale(1)\",\r\n          transition: \"0.2s\",\r\n        },\r\n        params.buttonStyle || {}\r\n      )\r\n    );\r\n  };\r\n\r\n  applyTextStyle = (params: IParams): void => {\r\n    Object.assign(\r\n      this.text.style,\r\n      Object.assign(\r\n        {\r\n          color: \"white\",\r\n        },\r\n        params.textStyle || {}\r\n      )\r\n    );\r\n    this.text.innerText =\r\n      params.text ||\r\n      \"Nemáte čas, nevíte si rady? Zanechte nám telefonní číslo a my vám pomůžeme ušetřit\";\r\n  };\r\n\r\n  applyInputStyle = (params: IParams): void => {\r\n    Object.assign(\r\n      this.input.style,\r\n      Object.assign(\r\n        {\r\n          border: \"none\",\r\n          width: \"100%\",\r\n          padding: \"5px\",\r\n          outline: \"none\",\r\n          borderRadius: \"5px\",\r\n          fontSize: \"30px\",\r\n          margin: \"10px auto 20px\",\r\n        },\r\n        params.inputStyle || {}\r\n      )\r\n    );\r\n  };\r\n\r\n  applySendButtonStyle = (params: IParams): void => {\r\n    Object.assign(\r\n      this.sendButton.style,\r\n      Object.assign(\r\n        {\r\n          color: \"white\",\r\n          border: \"none\",\r\n          padding: \"5px\",\r\n          outline: \"none\",\r\n          borderRadius: \"5px\",\r\n          fontSize: \"20px\",\r\n          background: \"rgb(6, 83, 76)\",\r\n          cursor: \"pointer\",\r\n        },\r\n        params.sendButtonStyle || {}\r\n      )\r\n    );\r\n    this.sendButton.innerText = params.text || \"ODESLAT\";\r\n  };\r\n\r\n  applyFormStyle = (): void => {\r\n    Object.assign(this.form.style, {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n    });\r\n    this.form.setAttribute(\"id\", \"call_back_form_vlsr\");\r\n  };\r\n\r\n  addEvents = (params: IParams): void => {\r\n    this.btn.addEventListener(\"mouseover\", (e: MouseEvent) => {\r\n      this.applyButtonHoverStyle(params);\r\n    });\r\n    this.btn.addEventListener(\"mouseout\", (e: MouseEvent) => {\r\n      this.applyButtonStyle(params);\r\n    });\r\n    this.input.addEventListener(\"input\", this.handleInput);\r\n    this.closeButton.addEventListener(\"click\", this.pressButtonHandler);\r\n    this.btn.addEventListener(\"click\", this.pressButtonHandler);\r\n    this.btn.addEventListener(\"touch\", this.pressButtonHandler);\r\n    this.btn.addEventListener(\"dblclick\", (e: MouseEvent) => {\r\n      e.preventDefault();\r\n    });\r\n  };\r\n\r\n  handleInput = (e: any) => {\r\n    e.target.value = this.phoneMask(e.target.value);\r\n  };\r\n\r\n  phoneMask = (phone: string) => {\r\n    return phone\r\n      .replace(/\\D/g, \"\")\r\n      .replace(/^(\\d)/, \"($1\")\r\n      .replace(/^(\\(\\d{2})(\\d)/, \"$1) $2\")\r\n      .replace(/(\\d{4})(\\d{1,5})/, \"$1-$2\")\r\n      .replace(/(-\\d{5})\\d+?$/, \"$1\");\r\n  };\r\n\r\n  /**\r\n   * Function which is responsible for click or touch event on callback button\r\n   */\r\n  pressButtonHandler = (): void => {\r\n    this.show = !this.show;\r\n    Object.assign(this.popup.style, {\r\n      display: this.show ? \"block\" : \"none\",\r\n    });\r\n  };\r\n\r\n  appendAll = (): void => {\r\n    document.body.append(this.popup);\r\n    this.popup.append(this.closeButton);\r\n    this.popup.append(this.text);\r\n    this.form.append(this.input);\r\n    this.form.append(this.sendButton);\r\n    this.popup.append(this.form);\r\n    document.body.append(this.btn);\r\n  };\r\n}\r\n\r\n/**\r\n * Declaring global variable for the init function to render callback button, it accepts Parameters as argument.\r\n */\r\ndeclare global {\r\n  interface Window {\r\n    CallBack: Object;\r\n  }\r\n}\r\nif (typeof window !== \"undefined\") {\r\n  window.CallBack = CallBack;\r\n}\r\n","var map = {\n\t\"./en.json\": 26\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 846;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(156);\n"],"names":["CallBack","language","Object","assign","setLanguage","lang","this","e","console","log","btn","document","createElement","popup","closeButton","text","sendButton","form","input","show","init","params","html","querySelector","getAttribute","waitForElement","renderCallBack","selector","Promise","resolve","observer","MutationObserver","mutations","disconnect","observe","body","childList","subtree","applyButtonStyle","applyPopupStyle","applyCloseButtonStyle","applyTextStyle","applyFormStyle","applyInputStyle","applySendButtonStyle","addEvents","appendAll","style","cursor","width","height","background","position","bottom","right","boxShadow","transform","transition","buttonStyle","applyButtonHoverStyle","hoverButtonStyle","maxWidth","borderRadius","display","boxSizing","padding","popupStyle","top","color","textStyle","innerText","border","outline","fontSize","margin","inputStyle","sendButtonStyle","flexDirection","alignItems","setAttribute","addEventListener","handleInput","pressButtonHandler","preventDefault","target","value","phoneMask","phone","replace","append","window","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","Error","code","keys","module","exports","__webpack_module_cache__","moduleId","cachedModule","undefined","__webpack_modules__","call","obj","prop","prototype","hasOwnProperty"],"sourceRoot":""}